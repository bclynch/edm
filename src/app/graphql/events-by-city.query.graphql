query eventsByCity($city: String!, $accountId: Int!, $greaterThan: BigInt!, $lessThan: BigInt!) {
  allCities(
    filter: {
      name: {
        equalTo: $city
      }
    }
  ) {
    nodes {
      name
      venuesByCity {
        nodes {
          name,
          lat,
          lon,
          eventsByVenue(
            filter: {
              startDate: {
                greaterThanOrEqualTo: $greaterThan,
                lessThanOrEqualTo: $lessThan
              }
            }
          ) {
            nodes {
              id,
              name,
              startDate,
              ticketproviderurl,
              ticketproviderid,
              artistToEventsByEventId(first: 1) {
                nodes {
                  artistByArtistId {
                    photo
                  }
                }
              },
              watchListsByEventId(
                filter: {
                  accountId: {
                    equalTo: $accountId
                  }
                }
              ) {
                nodes {
                  id
                }
              }
            }
          }
        }
      }
    }
  }
}