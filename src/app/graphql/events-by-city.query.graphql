query eventsByCity($city: String!) {
  allCities(filter: {
    name: {
      equalTo: $city
    }
  }) {
    nodes {
      name
      venuesByCity {
        nodes {
          name,
          lat,
          lon,
          eventsByVenue {
            nodes {
              id,
              name,
              startDate,
              ticketproviderurl,
              ticketproviderid,
              artistToEventsByEventId(first: 1) {
                nodes {
                  artistByArtistId {
                    photo
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}