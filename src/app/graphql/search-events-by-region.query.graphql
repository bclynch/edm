query searchEventsByRegion(
    $query: String!,
    $regionName: String!,
    $accountId: Int!,
    $greaterThan: BigInt!,
    $lessThan: BigInt!,
    $recentGreaterThan: BigInt!,
    $count: Int
  ) {
  regionByName(name: $regionName) {
    name,
    citiesByRegion {
      nodes {
        name,
      	venuesByCity {
          nodes {
            eventsByVenue(
              filter: {
                or: [
                  {
                    name: {
                  		includesInsensitive: $query
                		}
                  },
                  {
                    venue: {
                      includesInsensitive: $query
                    }
                  }
                ],
                startDate: {
                  greaterThanOrEqualTo: $greaterThan,
                  lessThanOrEqualTo: $lessThan
                },
                createdAt: {
                  greaterThanOrEqualTo: $recentGreaterThan,
                }
              },
              first: $count
            ) {
              nodes {
                id,
                name,
                startDate,
                ticketproviderurl,
                ticketproviderid,
                venue,
                createdAt,
                venueByVenue {
                  lat,
                  lon
                }
                artistToEventsByEventId(first: 1) {
                  nodes {
                    artistByArtistId {
                      photo
                    }
                  }
                },
                watchListsByEventId(
                  filter: {
                    accountId: {
                      equalTo: $accountId
                    }
                  }
                ) {
                  nodes {
                    id
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}