<div class="dialogueContainer">
  <form [formGroup]="loginForm" *ngIf="isLogin" (ngSubmit)="onLogin()">
    <h1>Login To Your Account</h1>
    <mat-form-field>
      <input
        matInput
        placeholder="Email" 
        formControlName="email"
        [errorStateMatcher]="matcher"
      />
    </mat-form-field>
    <mat-form-field>
      <input
        matInput
        placeholder="Password"
        type="password" 
        formControlName="password"
        [errorStateMatcher]="matcher"
      />
    </mat-form-field>
    <button mat-flat-button color="primary" type="submit">Login</button>
    <button mat-button color="primary" (click)="dialogRef.close()">Continue as Guest</button>
    <div class="toggle">New to EDM? <button mat-button color="primary" (click)="isLogin = false">Create a New Account</button></div>
  </form>
  <form [formGroup]="signupForm" *ngIf="!isLogin" (ngSubmit)="onSignup()">
    <h1>Create New Account</h1>
    <mat-form-field>
      <input
        matInput
        placeholder="Email" 
        formControlName="email"
        [errorStateMatcher]="matcher"
      />
      <mat-error *ngFor="let validation of formValidationMessages.email">
        <mat-error class="error-message" *ngIf="signupForm.get('email').hasError(validation.type) && (signupForm.get('email').dirty || signupForm.get('email').touched)">{{validation.message}}</mat-error>
      </mat-error>
    </mat-form-field>
    <mat-form-field>
      <input
        matInput
        placeholder="Username" 
        formControlName="username"
        [errorStateMatcher]="matcher"
      />
      <mat-error *ngFor="let validation of formValidationMessages.username">
        <mat-error class="error-message" *ngIf="signupForm.get('username').hasError(validation.type) && (signupForm.get('username').dirty || signupForm.get('username').touched)">{{validation.message}}</mat-error>
      </mat-error>
    </mat-form-field>
    <ng-container formGroupName="matchingPassword">
      <mat-form-field>
        <input
          matInput
          placeholder="Password"
          type="password" 
          formControlName="password"
          [errorStateMatcher]="matcher"
        />
        <mat-error *ngFor="let validation of formValidationMessages.password">
          <mat-error class="error-message" *ngIf="signupForm.get('matchingPassword').get('password').hasError(validation.type) && (signupForm.get('matchingPassword').get('password').dirty || signupForm.get('matchingPassword').get('password').touched)">{{validation.message}}</mat-error>
        </mat-error>
      </mat-form-field>
      <mat-form-field>
        <input
          matInput
          placeholder="Confirm Password"
          type="password" 
          formControlName="confirmPassword"
          [errorStateMatcher]="matcher"
        />
        <mat-error *ngFor="let validation of formValidationMessages.confirmPassword">
          <mat-error class="error-message" *ngIf="(signupForm.get('matchingPassword').get('confirmPassword').hasError(validation.type)|| signupForm.get('matchingPassword').hasError(validation.type)) && (signupForm.get('matchingPassword').get('confirmPassword').dirty || signupForm.get('matchingPassword').get('confirmPassword').touched)">{{validation.message}}</mat-error>
        </mat-error>
      </mat-form-field>
    </ng-container>
    <button mat-flat-button color="primary" type="submit">Signup</button>
    <div class="toggle">Have an Account? <button mat-button color="primary" (click)="isLogin = true">Go To Login</button></div>
  </form>
</div>
